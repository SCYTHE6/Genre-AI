(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5005:(e,t,r)=>{Promise.resolve().then(r.bind(r,8295))},8295:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5155),s=r(2115);function l(){let[e,t]=(0,s.useState)(0),[r,l]=(0,s.useState)("Preparing audio file...");return(0,s.useEffect)(()=>{[{time:0,text:"Preparing audio file...",progress:10},{time:1e3,text:"Analyzing audio characteristics...",progress:25},{time:2500,text:"Separating audio stems...",progress:40},{time:4e3,text:"Applying genre effects...",progress:65},{time:5500,text:"Fine-tuning output...",progress:85},{time:7e3,text:"Finalizing transformation...",progress:95}].forEach(e=>{let{time:r,text:n,progress:s}=e,i=setTimeout(()=>{l(n),t(s)},r);return()=>clearTimeout(i)})},[]),(0,n.jsx)("div",{className:"loading-overlay",children:(0,n.jsxs)("div",{className:"loading-container",children:[(0,n.jsx)("div",{className:"spinner-container",children:(0,n.jsx)("div",{className:"loading-spinner"})}),(0,n.jsxs)("div",{className:"loading-text",children:[(0,n.jsx)("p",{className:"loading-title",children:"Transforming Your Audio"}),(0,n.jsx)("p",{className:"loading-subtitle",children:r}),(0,n.jsxs)("div",{className:"loading-progress",children:[(0,n.jsx)("div",{className:"loading-bar",children:(0,n.jsx)("div",{className:"loading-bar-fill",style:{width:"".concat(e,"%"),transition:"width 0.5s ease-out"}})}),(0,n.jsxs)("div",{className:"progress-percentage",children:[e,"%"]})]})]})]})})}var i=r(6710);function a(e){let{onFileSelected:t}=e,[r,l]=(0,s.useState)(!1),[a,o]=(0,s.useState)(null),c=(0,s.useRef)(null),d=(0,s.useCallback)(e=>{if(e&&e.length>0){let r=e[0];console.log("File dropped:",r.name,"Size:",r.size,"Type:",r.type),o(r.name),t(r)}},[t]),{getRootProps:u,getInputProps:h}=(0,i.VB)({onDrop:d,accept:{"audio/*":[".mp3",".wav"]},maxFiles:1,maxSize:8388608,onDragEnter:()=>l(!0),onDragLeave:()=>l(!1),onDropAccepted:()=>l(!1),onDropRejected:()=>l(!1)});return(0,n.jsx)("div",{children:(0,n.jsxs)("div",{...u(),className:"dropzone ".concat(r?"dragging":""," ").concat(a?"file-selected":""),children:[(0,n.jsx)("input",{...h(),ref:c,onChange:e=>{if(e.target.files&&e.target.files.length>0){let r=e.target.files[0];console.log("File selected via input:",r.name,"Size:",r.size,"Type:",r.type),o(r.name),t(r)}}}),(0,n.jsxs)("div",{className:"dropzone-content",children:[(0,n.jsx)("div",{className:"upload-icon-container",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,n.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,n.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),a?(0,n.jsxs)("p",{className:"selected-file",children:["Selected: ",a]}):(0,n.jsx)("p",{className:"drag-text",children:"Drag 'n' drop files here, or click to select files"}),(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),c.current&&c.current.click()},className:"choose-file-btn",children:"Choose File"}),(0,n.jsx)("p",{className:"file-limit",children:"You can upload 8 files (up to 8 MB each)"})]})]})})}function o(e){let{message:t,onClose:r}=e,[l,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=setTimeout(()=>{i(!1),setTimeout(r,500)},5e3);return()=>clearTimeout(e)},[r]),(0,n.jsxs)("div",{className:"success-notification ".concat(l?"show":"hide"),children:[(0,n.jsx)("div",{className:"success-icon",children:"✓"}),(0,n.jsx)("p",{children:t}),(0,n.jsx)("button",{onClick:()=>{i(!1),setTimeout(r,500)},children:"\xd7"})]})}function c(){let[e,t]=(0,s.useState)(null),[r,i]=(0,s.useState)("rock"),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),f=(0,s.useRef)(null),j=(0,s.useRef)(null),v=(0,s.useRef)(null),w=(0,s.useRef)(null),y=(0,s.useRef)(null),[N,b]=(0,s.useState)(!1),[S,T]=(0,s.useState)(!1),[k,C]=(0,s.useState)(0),[L,A]=(0,s.useState)(0),[E,M]=(0,s.useState)(0),[z,R]=(0,s.useState)(0),[B,F]=(0,s.useState)(null),[P,V]=(0,s.useState)(null),[U,D]=(0,s.useState)(null),[O,q]=(0,s.useState)(null),[Z,I]=(0,s.useState)(null),[_,G]=(0,s.useState)(!1),[J,W]=(0,s.useState)(""),[Y,H]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=new(window.AudioContext||window.webkitAudioContext);return F(e),()=>{e&&e.close()}},[]),(0,s.useEffect)(()=>{if(!B||!j.current||!w.current)return;if(!O)try{let e=B.createMediaElementSource(j.current);q(e);let t=B.createAnalyser();t.fftSize=256,e.connect(t),t.connect(B.destination),V(t)}catch(e){console.error("Error setting up original audio:",e);return}if(!P)return;let e=P.frequencyBinCount,t=new Uint8Array(e),r=w.current,n=r.getContext("2d");if(!n)return;let s=()=>{let l;if(!N)return;requestAnimationFrame(s),P.getByteFrequencyData(t),n.fillStyle="rgb(15, 23, 42)",n.fillRect(0,0,r.width,r.height);let i=r.width/e*2.5,a=0,o=n.createLinearGradient(0,0,0,r.height);o.addColorStop(0,"#7f5af0"),o.addColorStop(1,"#2cb67d");for(let s=0;s<e;s++)l=t[s]/2,n.fillStyle=o,n.fillRect(a,r.height-l,i,l),a+=i+1};s()},[B,N,O,P]),(0,s.useEffect)(()=>{if(!B||!v.current||!y.current)return;if(!Z)try{let e=B.createMediaElementSource(v.current);I(e);let t=B.createAnalyser();t.fftSize=256,e.connect(t),t.connect(B.destination),D(t)}catch(e){console.error("Error setting up transformed audio:",e);return}if(!U)return;let e=U.frequencyBinCount,t=new Uint8Array(e),r=y.current,n=r.getContext("2d");if(!n)return;let s=()=>{let l;if(!S)return;requestAnimationFrame(s),U.getByteFrequencyData(t),n.fillStyle="rgb(15, 23, 42)",n.fillRect(0,0,r.width,r.height);let i=r.width/e*2.5,a=0,o=n.createLinearGradient(0,0,0,r.height);o.addColorStop(0,"#2cb67d"),o.addColorStop(1,"#7f5af0");for(let s=0;s<e;s++)l=t[s]/2,n.fillStyle=o,n.fillRect(a,r.height-l,i,l),a+=i+1};s()},[B,S,Z,U]);let X=e=>{let t=Math.floor(e/60),r=Math.floor(e%60);return"".concat(t,":").concat(r<10?"0":"").concat(r)},Q=async()=>{if(console.log("Transform button clicked directly!"),!e){alert("Please select an audio file first.");return}console.log("Preparing to submit file:",{name:e.name,size:e.size,type:e.type,lastModified:e.lastModified}),console.log("Selected genre:",r),d(!0),g(null),Z&&(Z.disconnect(),I(null)),U&&(U.disconnect(),D(null)),h(null);let t=r||"rock";(t=t.trim().replace(/[^\w\s-]/g,""))||(t="rock"),console.log("Cleaned genre value:",t);let n=new FormData;for(let r of(n.append("audioFile",e,e.name),n.append("genre",t),console.log("Form data entries:"),n.entries()))console.log(r[0],r[1]);try{console.log("Sending request to /api/transform");let e=await fetch("/api/transform",{method:"POST",body:n});if(console.log("API response status:",e.status),!e.ok){let t=await e.text();console.error("Error response text:",t);let r={};try{r=JSON.parse(t)}catch(e){console.error("Failed to parse error response as JSON:",e)}throw console.error("Error response data:",r),Error("Server error: ".concat(e.status," - ").concat(r.error||t||"Unknown error"))}let t=await e.json();if(console.log("Transformation result:",t),t.success&&t.transformedFilePath)h(t.transformedFilePath),H(!0),W(t.message||"Audio successfully transformed"),G(!0),console.log("Transformation complete, audio URL:",t.transformedFilePath);else throw console.error("Unexpected API response:",t),Error(t.message||"Unexpected response from server")}catch(e){console.error("Error transforming audio:",e),g("Failed to transform audio: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{d(!1)}};return(0,s.useEffect)(()=>{console.log("Transformed audio state changed:",u)},[u]),(0,s.useEffect)(()=>{let e=()=>{document.querySelectorAll("*").forEach(e=>{let t=window.getComputedStyle(e);if("50%"===t.borderRadius||"100%"===t.borderRadius||"svg"===e.tagName&&e.getAttribute("viewBox")&&e.getAttribute("viewBox").includes("0 0 100 100")){let r=e.getBoundingClientRect();if(r.width>200||r.height>200){console.log("Found large circular element:",e);let r=e.parentElement;(r===document.body||r.classList.contains("modal-container")||r.classList.contains("loading-container")||"fixed"===t.position)&&(console.log("Removing unwanted loading indicator:",e),e.style.display="none")}}})};if(e(),c){let t=setTimeout(()=>{e()},100);return()=>clearTimeout(t)}},[c]),(0,s.useEffect)(()=>(document.body.classList.add("fade-in"),document.querySelectorAll(".card").forEach(e=>{e.classList.add("staggered-slide-up")}),()=>{document.body.classList.remove("fade-in")}),[]),(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"page-background"}),(0,n.jsxs)("div",{className:"heading-container",children:[(0,n.jsx)("h1",{className:"main-heading",children:"Transform Your Audio"}),(0,n.jsx)("p",{className:"main-subheading",children:"Upload an audio file and convert it to your selected genre with our AI-powered transformation engine"})]}),(0,n.jsxs)("div",{className:"card upload-form-card",children:[(0,n.jsx)("h2",{className:"section-title",children:"Upload an audio file (MP3, WAV)"}),(0,n.jsx)("div",{className:"dropzone-container",children:(0,n.jsx)(a,{onFileSelected:e=>{console.log("File selected:",e.name,"Size:",e.size,"Type:",e.type),t(e),h(null),g(null),O&&(O.disconnect(),q(null)),P&&(P.disconnect(),V(null)),e?p(URL.createObjectURL(e)):p(null)}})}),(0,n.jsx)("h2",{className:"genre-selection-label",children:"Select Target Genre"}),(0,n.jsx)("div",{className:"genre-selection-container",children:(0,n.jsxs)("select",{className:"genre-select",value:r,onChange:e=>{i(e.target.value)},children:[(0,n.jsx)("option",{value:"rock",children:"Rock"}),(0,n.jsx)("option",{value:"jazz",children:"Jazz"}),(0,n.jsx)("option",{value:"electronic",children:"Electronic"}),(0,n.jsx)("option",{value:"classical",children:"Classical"})]})}),(0,n.jsxs)("div",{className:"buttons-container",children:[(0,n.jsx)("button",{type:"button",className:"transform-button",onClick:Q,disabled:c||!e,children:c?(0,n.jsx)("span",{children:"Processing..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"transform-icon",children:"▶"})," Transform Audio"]})}),(0,n.jsx)("button",{type:"button",className:"reset-button",onClick:()=>{t(null),h(null),p(null),g(null),b(!1),T(!1),O&&(O.disconnect(),q(null)),Z&&(Z.disconnect(),I(null)),P&&(P.disconnect(),V(null)),U&&(U.disconnect(),D(null)),f.current&&(f.current.value="")},children:"Reset"})]})]}),m&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("label",{className:"block text-white font-medium mb-2",children:"Original Audio"}),(0,n.jsxs)("div",{className:"modern-player",children:[(0,n.jsxs)("div",{className:"player-container",children:[(0,n.jsx)("div",{className:"player-thumbnail no-image"}),(0,n.jsxs)("div",{className:"player-content",children:[(0,n.jsxs)("div",{className:"player-header",children:[(0,n.jsx)("h3",{className:"player-title",children:(null==e?void 0:e.name)||"Original Audio"}),(0,n.jsx)("p",{className:"player-subtitle",children:"Original Track"})]}),(0,n.jsxs)("div",{className:"player-controls",children:[(0,n.jsx)("button",{className:"player-button",onClick:e=>{e.stopPropagation(),j.current&&(j.current.currentTime=Math.max(0,j.current.currentTime-10))},children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 7L4 12L12 17V7Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M20 7L12 12L20 17V7Z",fill:"currentColor"})]})}),(0,n.jsx)("button",{className:"player-button play-pause",onClick:e=>(e.preventDefault(),e.stopPropagation(),setTimeout(()=>{j.current&&(j.current.paused?(j.current.play(),b(!0)):(j.current.pause(),b(!1)))},0),!1),onMouseDown:e=>e.stopPropagation(),onTouchStart:e=>e.stopPropagation(),children:N?(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"white"}),(0,n.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"white"})]}):(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M8 5V19L19 12L8 5Z",fill:"white"})})}),(0,n.jsx)("button",{className:"player-button",onClick:e=>{e.stopPropagation(),j.current&&(j.current.currentTime=Math.min(j.current.duration,j.current.currentTime+10))},children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 7V17L20 12L12 7Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M4 7V17L12 12L4 7Z",fill:"currentColor"})]})})]}),(0,n.jsxs)("div",{className:"player-progress",children:[(0,n.jsx)("div",{className:"progress-bar",onClick:e=>{if(e.stopPropagation(),j.current){let t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width;j.current.currentTime=r*j.current.duration}},children:(0,n.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(j.current?j.current.currentTime/j.current.duration*100:0,"%")}})}),(0,n.jsxs)("div",{className:"time-display",children:[(0,n.jsx)("span",{children:j.current?X(j.current.currentTime):"0:00"}),(0,n.jsx)("span",{children:j.current?X(j.current.duration):"0:00"})]})]})]})]}),(0,n.jsx)("audio",{ref:j,src:m,className:"hidden",onTimeUpdate:()=>{var e;return C((null===(e=j.current)||void 0===e?void 0:e.currentTime)||0)},onLoadedMetadata:()=>{var e;return A((null===(e=j.current)||void 0===e?void 0:e.duration)||0)},onEnded:()=>b(!1)})]})]}),u&&(0,n.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-700",children:[(0,n.jsxs)("h3",{className:"text-lg font-medium mb-4 text-white",children:["Transformed Audio (",r,")"]}),(0,n.jsxs)("div",{className:"modern-player",children:[(0,n.jsxs)("div",{className:"player-container",children:[(0,n.jsx)("div",{className:"player-thumbnail",style:{backgroundImage:"url(/genre-thumbnails/".concat(r,".jpg)")}}),(0,n.jsxs)("div",{className:"player-content",children:[(0,n.jsxs)("div",{className:"player-header",children:[(0,n.jsxs)("h3",{className:"player-title",children:[(null==e?void 0:e.name)||"Audio"," - ",r," Version"]}),(0,n.jsx)("p",{className:"player-subtitle",children:"AI Transformed"})]}),(0,n.jsxs)("div",{className:"player-controls",children:[(0,n.jsx)("button",{className:"player-button",onClick:e=>{v.current&&(v.current.currentTime=Math.max(0,v.current.currentTime-10))},children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 7L4 12L12 17V7Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M20 7L12 12L20 17V7Z",fill:"currentColor"})]})}),(0,n.jsx)("button",{className:"player-button play-pause",onClick:e=>{v.current&&(v.current.paused?(v.current.play(),T(!0)):(v.current.pause(),T(!1)))},children:S?(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"white"}),(0,n.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"white"})]}):(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M8 5V19L19 12L8 5Z",fill:"white"})})}),(0,n.jsx)("button",{className:"player-button",onClick:e=>{v.current&&(v.current.currentTime=Math.min(v.current.duration,v.current.currentTime+10))},children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M12 7V17L20 12L12 7Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M4 7V17L12 12L4 7Z",fill:"currentColor"})]})})]}),(0,n.jsxs)("div",{className:"player-progress",children:[(0,n.jsx)("div",{className:"progress-bar",onClick:e=>{if(e.stopPropagation(),v.current){let t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width;v.current.currentTime=r*v.current.duration}},children:(0,n.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(v.current?v.current.currentTime/v.current.duration*100:0,"%")}})}),(0,n.jsxs)("div",{className:"time-display",children:[(0,n.jsx)("span",{children:v.current?X(v.current.currentTime):"0:00"}),(0,n.jsx)("span",{children:v.current?X(v.current.duration):"0:00"})]})]})]})]}),(0,n.jsx)("audio",{ref:v,src:u,className:"hidden",onTimeUpdate:()=>{var e;return M((null===(e=v.current)||void 0===e?void 0:e.currentTime)||0)},onLoadedMetadata:()=>{var e;return R((null===(e=v.current)||void 0===e?void 0:e.duration)||0)},onEnded:()=>T(!1)})]}),(0,n.jsx)("div",{className:"download-button-container",children:(0,n.jsxs)("a",{href:u,download:"transformed-".concat(r,".mp3"),className:"download-button",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download ",r," Version"]})})]}),c&&(0,n.jsx)(l,{}),_&&(0,n.jsx)(o,{message:"Audio transformed successfully!",onClose:()=>G(!1)}),(0,n.jsxs)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsx)("div",{className:"card ai-card",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"AI-Powered Transformation"}),(0,n.jsx)("p",{children:"Our advanced AI models analyze your audio and transform it based on genre-specific characteristics."})]})}),(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Multiple Genres"}),(0,n.jsx)("p",{children:"Transform your audio into Rock, Jazz, Electronic, Classical and more genres with a single click."})]})}),(0,n.jsx)("div",{className:"card",children:(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"High Quality Output"}),(0,n.jsx)("p",{children:"Enjoy high-fidelity audio output that preserves the original quality while applying genre transformations."})]})})]}),Y&&u&&(0,n.jsxs)("div",{className:"result-section",children:[(0,n.jsx)("h2",{children:"Transformation Complete!"}),(0,n.jsx)("p",{className:"transformation-details",children:J}),(0,n.jsx)("div",{className:"audio-player-container",children:(0,n.jsx)("audio",{controls:!0,src:u,className:"audio-player",children:"Your browser does not support the audio element."})}),(0,n.jsx)("div",{className:"download-container",children:(0,n.jsxs)("a",{href:u,download:!0,className:"download-button",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,n.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,n.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Download ",r," Version"]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[710,441,684,358],()=>t(5005)),_N_E=e.O()}]);